require './main'

sample_input = "..##.........##.........##.........##.........##.........##.......
#...#...#..#...#...#..#...#...#..#...#...#..#...#...#..#...#...#..
.#....#..#..#....#..#..#....#..#..#....#..#..#....#..#..#....#..#.
..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#
.#...##..#..#...##..#..#...##..#..#...##..#..#...##..#..#...##..#.
..#.##.......#.##.......#.##.......#.##.......#.##.......#.##.....
.#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#
.#........#.#........#.#........#.#........#.#........#.#........#
#.##...#...#.##...#...#.##...#...#.##...#...#.##...#...#.##...#...
#...##....##...##....##...##....##...##....##...##....##...##....#
.#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#"
slopes = [[1, 1], [3, 1], [5, 1], [7, 1], [1, 2]]

RSpec.describe 'solution' do

  describe '#count_trees_by_slope' do
    sample_grid = sample_input.split("\n")

    it 'returns 7 for the first example in website' do
      expect(count_trees_by_slope(sample_grid, [3, 1])).to eq(7)
    end

    it 'returns 336 for the second example in website' do
      trees = slopes.map do |slope|
        count_trees_by_slope(sample_grid, slope)
      end

      expect(trees.inject(:*)).to eq(336)
    end

  end
end
